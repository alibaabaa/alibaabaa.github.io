<!DOCTYPE html>
<html lang="en-gb">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The browser is your friend—defence in depth via the client</title>
<meta name="description" content="Tom Eggington">
<meta name="generator" content="Hugo 0.20.2" />
<meta property="og:title" content="The browser is your friend—defence in depth via the client" />
<meta property="og:description" content="When thinking about the security of applications we build for the web, the scale and breadth of attacks an application might face can be overwhelming.
 How should the server OS be configured? How should the web server be configured? What security defaults does my chosen web framework come with, and do I need to change them? What use cases am I not considering? Am I making assumptions anywhere about user input?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.tomeggington.co.uk/the-browser-is-your-frienddefence-in-depth-via-the-client/" />



<meta property="article:published_time" content="2015-04-30T16:29:54&#43;01:00"/>
<meta property="article:modified_time" content="2015-04-30T16:29:54&#43;01:00"/>











<link rel="dns-prefetch" href="//fonts.googleapis.com" />

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700" type="text/css" media="all" />
<link rel="stylesheet" href="https://www.tomeggington.co.uk/css/style.css" type="text/css" media="all" />
<script type="text/javascript" src="https://www.tomeggington.co.uk/js/scripts.js"></script>
</head>
<body class="body body-right-sidebar mobile" itemscope="itemscope" itemtype="http://schema.org/WebPage">
	<div class="container container-outer">
		<header class="header" itemscope="itemscope" itemtype="http://schema.org/WPHeader">
			<div class="container container-inner clearfix">
				<div class="logo" role="banner" itemscope="itemscope" itemtype="http://schema.org/Brand">
					<a class="logo__link" href="https://www.tomeggington.co.uk/" title="Tom Eggington" rel="home">
						<h1 class="logo__title">Tom Eggington</h1>
						
					</a>
				</div>
			</div>
			<nav class="menu" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
	<ul class="menu__list">
	</ul>
</nav>
		</header>
		<div class="wrapper clearfix">

<div class="main-content content" role="main" itemprop="mainContentOfPage">
	<article class="post">
		<header class="post__header clearfix">
			<h1 class="post__title">The browser is your friend—defence in depth via the client</h1>
			<p class="post__meta meta">
				<svg class="icon icon-time" height="14" viewBox="0 0 16 16" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m8-.0000003c-4.4 0-8 3.6-8 8 0 4.4000003 3.6 8.0000003 8 8.0000003 4.4 0 8-3.6 8-8.0000003 0-4.4-3.6-8-8-8zm0 14.4000003c-3.52 0-6.4-2.88-6.4-6.4000003 0-3.52 2.88-6.4 6.4-6.4 3.52 0 6.4 2.88 6.4 6.4 0 3.5200003-2.88 6.4000003-6.4 6.4000003zm.4-10.4000003h-1.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg>
				<time class="post__meta-date" datetime="2015-04-30 16:29:54 &#43;0100 BST">April 30, 2015</time>
			</p>
		</header>
		<div class="post__content clearfix">
			

<p>When thinking about the security of applications we build for the web, the scale and breadth of attacks an application might face can be overwhelming.</p>

<ul>
<li>How should the server OS be configured?</li>
<li>How should the web server be configured?</li>
<li>What security defaults does my chosen web framework come with, and do I need to change them?</li>
<li>What use cases am I not considering?</li>
<li>Am I making assumptions anywhere about user input?</li>
</ul>

<p>All of this is important stuff, although you can typically do away with thinking about the first two if your application is running inside a <a href="http://azure.microsoft.com/en-gb/overview/what-is-azure/">platform as a service</a>. When laid out as a tidy list on a web page, it doesn&rsquo;t look too bad, but unfortunately it&rsquo;s not at moments like this that it&rsquo;s important.</p>

<p>We all know that <a href="https://www.owasp.org/index.php/Defense_in_depth">defence in depth</a> is the way to a happier more secure online existence for our products, but when you&rsquo;re half way through implementing some complex new feature that runs right through the stack, your brain has a lot to deal with. A singular momentary lapse in vigilance, one trusted input that shouldn&rsquo;t be trusted, might be all that&rsquo;s needed to completely unravel an otherwise well designed, secure system.</p>

<p><a href="http://xkcd.com/327/"><img src="https://az761005.vo.msecnd.net/uploads/2015/04/exploits_of_a_mom.png" alt="" title="Her daughter is named Help I'm trapped in a driver's license factory." /></a> (xkcd of course)</p>

<p>But that&rsquo;s what defence in depth is all about. Typically, evil input from the client has to traverse more than one layer to exploit its target, and so we build up these multiple layers of null checks, overflow checks, value parameterisation, etc., <del>knowing</del> praying that <del>if</del> when we forget to check something somewhere, the value will still be caught elsewhere.</p>

<p>Perhaps the easiest, and most often overlooked, defence that we can depend on is the browser itself: the very tool the user is (<a href="http://www.telerik.com/fiddler">probably</a>) using to send input to our applications. On the surface, this might appear to contradict the mantra &ldquo;<a href="http://www.codemag.com/Article/0705061">All input is evil</a>&rdquo;. If no input is to be trusted, and the web browser is sending us input from the user, then how can we possibly trust the browser as a line of defence?</p>

<h4 id="this-is-2015-what-happened-to-2005">This is 2015? What happened to 2005?</h4>

<p>The apparent dichotomy between not trusting input, but trusting the browser, stems from the false mindset that web application security is about protecting the application. Protecting the application and its processes <em>is</em> an important tranche, but equally as important is protecting the user, the user&rsquo;s data and the user&rsquo;s actions. When we re-evaluate security on the basis of the user&rsquo;s safety and protection, our perspective shifts, and pointing out that the browser can be part of the defence is, well, obvious.</p>

<p><a href="https://az761005.vo.msecnd.net/uploads/2015/04/ie_xss_prevent.png"><img src="https://az761005.vo.msecnd.net/uploads/2015/04/ie_xss_prevent.png" alt="Internet Explorer detecting and preventing a potential XSS attack." /></a> Internet Explorer detecting and preventing a potential XSS attack.</p>

<p>The browser is a much more complicated beast than it used to be. You only have to look at <a href="http://www.wired.com/2015/04/google-chrome-password-alert/">Chrome&rsquo;s most recent security feature</a> to realise that. The browser is no longer there just to render some HTML and CSS and execute the occasional alert() dialogue. The browser is now actively protecting its user in ways too numerous to mention, and taking advantage of these features is the ultimate in low hanging fruit for web application security. Unlike anything further up the stack, the browser is server side agnostic, and so these features apply equally to all.</p>

<p>I won&rsquo;t go into detail about the reasons for and against implementing these protections, as others have already done a better job than I could. Instead, I&rsquo;ve chosen to list what I think of as the &lsquo;quick wins&rsquo;, and link to proper explanations and documentation regarding why the feature exists, and why you might want to consider it.</p>

<ul>
<li><a href="http://blog.codinghorror.com/protecting-your-cookies-httponly/">HttpOnly cookies</a> - offer protection from XSS data grabbing</li>
<li><a href="http://security.stackexchange.com/questions/100/how-can-i-check-that-my-cookies-are-only-sent-over-encrypted-https-and-not-http">Secure cookies</a> - prevent cookie data leaking over unencrypted connections</li>
<li><a href="https://msdn.microsoft.com/library/gg622941%28v=vs.85%29.aspx">x-content-type-options</a> - set to <em>nosniff</em> to prevent IE and Chrome from processing your files in ways you don&rsquo;t intend</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/X-Frame-Options">x-frame-options</a> - set to <em>deny</em> to protect your users from clickjacking</li>
<li><a href="https://www.owasp.org/index.php/HTTP_Strict_Transport_Security">strict-transport-security</a> - also known as HSTS, informs the browser that it should only communicate with your domain over https</li>
</ul>

<p>The wealth of options when it comes to communicating your intentions to the browser is an ever growing list of HTTP headers, and I could never hope to cover it in sufficient detail here. I haven&rsquo;t even touched upon <a href="http://enable-cors.org/">CORS</a> and why that might be important for you and your applications. As ever, the OWASP site, and specifically their <a href="https://www.owasp.org/index.php/OWASP_Cheat_Sheet_Series">cheat sheet section</a>, is a great place to start when considering web security.&rdquo;</p>

		</div>
		

	</article>
	
	
<nav class="post-nav row clearfix" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
	<div class="post-nav__item post-nav__item--prev col-1-2">
		<a class="post-nav__link" href="https://www.tomeggington.co.uk/eschewing-sql-in-favour-of-azure-tables/" rel="prev"><span class="post-nav__caption">«Previous</span><p class="post-nav__post-title">Eschewing SQL in favour of Azure Tables</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next col-1-2">
		<a class="post-nav__link" href="https://www.tomeggington.co.uk/moving-wordpress-media-to-azure-cdn/" rel="next"><span class="post-nav__caption">Next»</span><p class="post-nav__post-title">Moving WordPress media to Azure CDN</p></a>
	</div>
</nav>

	
</div>

<aside class="sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
	
	
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/on-passwords-biometrics-and-password-managers/">On Passwords, Biometrics, and Password Managers</a></li>
			<li class="widget__item"><a class="widget__link" href="/hardening-against-web-account-enumeration/">Hardening against web account enumeration</a></li>
			<li class="widget__item"><a class="widget__link" href="/why-global-tracing-doesnt-work-in-azure-web-apps/">Why global tracing doesnt work in Azure web apps</a></li>
			<li class="widget__item"><a class="widget__link" href="/trello-is-an-antidote-to-project-management-tools/">Trello is an antidote to project management tools</a></li>
			<li class="widget__item"><a class="widget__link" href="/the-user-isnt-stupid/">The User isn&#39;t Stupid</a></li>
			<li class="widget__item"><a class="widget__link" href="/hsts-and-why-everything-you-serve-should-be-over-https/">HSTS and why everything you serve should be over HTTPS</a></li>
			<li class="widget__item"><a class="widget__link" href="/moving-wordpress-media-to-azure-cdn/">Moving WordPress media to Azure CDN</a></li>
			<li class="widget__item"><a class="widget__link" href="/the-browser-is-your-frienddefence-in-depth-via-the-client/">The browser is your friend—defence in depth via the client</a></li>
			<li class="widget__item"><a class="widget__link" href="/eschewing-sql-in-favour-of-azure-tables/">Eschewing SQL in favour of Azure Tables</a></li>
			<li class="widget__item"><a class="widget__link" href="/azure-standard-website-pricing/">Azure standard website pricing</a></li>
		</ul>
	</div>
</div>
	
	
</aside>
	</div>
		<footer class="footer" itemscope="itemscope" itemtype="http://schema.org/WPFooter">
			<div class="container container-inner">
				<p class="footer__copyright">&copy; 2017 Tom Eggington. Based on <a href="//wordpress.org/themes/mh-magazine-lite/" target="_blank" rel="nofollow noopener noreferrer">MH Magazine lite</a>.</p>
			</div>
		</footer>
	</div>

<script>
	var navigation = responsiveNav(".menu", {
		navClass: "menu--collapse",
	});
</script>

</body>
</html>